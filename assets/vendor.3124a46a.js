/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var q=function(n,t){return q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])},q(n,t)};function _(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");q(n,t);function r(){this.constructor=n}n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function En(n,t,r,e){function o(i){return i instanceof r?i:new r(function(u){u(i)})}return new(r||(r=Promise))(function(i,u){function a(l){try{c(e.next(l))}catch(h){u(h)}}function f(l){try{c(e.throw(l))}catch(h){u(h)}}function c(l){l.done?i(l.value):o(l.value).then(a,f)}c((e=e.apply(n,t||[])).next())})}function tn(n,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},e,o,i,u;return u={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(c){return function(l){return f([c,l])}}function f(c){if(e)throw new TypeError("Generator is already executing.");for(;r;)try{if(e=1,o&&(i=c[0]&2?o.return:c[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,c[1])).done)return i;switch(o=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,o=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(n,r)}catch(l){c=[6,l],o=0}finally{e=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function x(n){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&n[t],e=0;if(r)return r.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&e>=n.length&&(n=void 0),{value:n&&n[e++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function A(n,t){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var e=r.call(n),o,i=[],u;try{for(;(t===void 0||t-- >0)&&!(o=e.next()).done;)i.push(o.value)}catch(a){u={error:a}}finally{try{o&&!o.done&&(r=e.return)&&r.call(e)}finally{if(u)throw u.error}}return i}function C(n,t,r){if(r||arguments.length===2)for(var e=0,o=t.length,i;e<o;e++)(i||!(e in t))&&(i||(i=Array.prototype.slice.call(t,0,e)),i[e]=t[e]);return n.concat(i||Array.prototype.slice.call(t))}function O(n){return this instanceof O?(this.v=n,this):new O(n)}function In(n,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r.apply(n,t||[]),o,i=[];return o={},u("next"),u("throw"),u("return"),o[Symbol.asyncIterator]=function(){return this},o;function u(s){e[s]&&(o[s]=function(d){return new Promise(function(y,v){i.push([s,d,y,v])>1||a(s,d)})})}function a(s,d){try{f(e[s](d))}catch(y){h(i[0][3],y)}}function f(s){s.value instanceof O?Promise.resolve(s.value.v).then(c,l):h(i[0][2],s)}function c(s){a("next",s)}function l(s){a("throw",s)}function h(s,d){s(d),i.shift(),i.length&&a(i[0][0],i[0][1])}}function On(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],r;return t?t.call(n):(n=typeof x=="function"?x(n):n[Symbol.iterator](),r={},e("next"),e("throw"),e("return"),r[Symbol.asyncIterator]=function(){return this},r);function e(i){r[i]=n[i]&&function(u){return new Promise(function(a,f){u=n[i](u),o(a,f,u.done,u.value)})}}function o(i,u,a,f){Promise.resolve(f).then(function(c){i({value:c,done:a})},u)}}function p(n){return typeof n=="function"}function en(n){var t=function(e){Error.call(e),e.stack=new Error().stack},r=n(t);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var G=en(function(n){return function(r){n(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(e,o){return o+1+") "+e.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function U(n,t){if(n){var r=n.indexOf(t);0<=r&&n.splice(r,1)}}var Y=function(){function n(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._teardowns=null}return n.prototype.unsubscribe=function(){var t,r,e,o,i;if(!this.closed){this.closed=!0;var u=this._parentage;if(u)if(this._parentage=null,Array.isArray(u))try{for(var a=x(u),f=a.next();!f.done;f=a.next()){var c=f.value;c.remove(this)}}catch(v){t={error:v}}finally{try{f&&!f.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}else u.remove(this);var l=this.initialTeardown;if(p(l))try{l()}catch(v){i=v instanceof G?v.errors:[v]}var h=this._teardowns;if(h){this._teardowns=null;try{for(var s=x(h),d=s.next();!d.done;d=s.next()){var y=d.value;try{K(y)}catch(v){i=i!=null?i:[],v instanceof G?i=C(C([],A(i)),A(v.errors)):i.push(v)}}}catch(v){e={error:v}}finally{try{d&&!d.done&&(o=s.return)&&o.call(s)}finally{if(e)throw e.error}}}if(i)throw new G(i)}},n.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)K(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._teardowns=(r=this._teardowns)!==null&&r!==void 0?r:[]).push(t)}},n.prototype._hasParent=function(t){var r=this._parentage;return r===t||Array.isArray(r)&&r.includes(t)},n.prototype._addParent=function(t){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(t),r):r?[r,t]:t},n.prototype._removeParent=function(t){var r=this._parentage;r===t?this._parentage=null:Array.isArray(r)&&U(r,t)},n.prototype.remove=function(t){var r=this._teardowns;r&&U(r,t),t instanceof n&&t._removeParent(this)},n.EMPTY=function(){var t=new n;return t.closed=!0,t}(),n}(),on=Y.EMPTY;function un(n){return n instanceof Y||n&&"closed"in n&&p(n.remove)&&p(n.add)&&p(n.unsubscribe)}function K(n){p(n)?n():n.unsubscribe()}var Z={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},M={setTimeout:function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var r=M.delegate;return((r==null?void 0:r.setTimeout)||setTimeout).apply(void 0,C([],A(n)))},clearTimeout:function(n){var t=M.delegate;return((t==null?void 0:t.clearTimeout)||clearTimeout)(n)},delegate:void 0};function cn(n){M.setTimeout(function(){throw n})}function X(){}var An=function(){return J("C",void 0,void 0)}();function Tn(n){return J("E",void 0,n)}function Pn(n){return J("N",n,void 0)}function J(n,t,r){return{kind:n,value:t,error:r}}function R(n){n()}var Q=function(n){_(t,n);function t(r){var e=n.call(this)||this;return e.isStopped=!1,r?(e.destination=r,un(r)&&r.add(e)):e.destination=Ln,e}return t.create=function(r,e,o){return new F(r,e,o)},t.prototype.next=function(r){this.isStopped?D(Pn(r),this):this._next(r)},t.prototype.error=function(r){this.isStopped?D(Tn(r),this):(this.isStopped=!0,this._error(r))},t.prototype.complete=function(){this.isStopped?D(An,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,n.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(r){this.destination.next(r)},t.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(Y),Cn=Function.prototype.bind;function z(n,t){return Cn.call(n,t)}var _n=function(){function n(t){this.partialObserver=t}return n.prototype.next=function(t){var r=this.partialObserver;if(r.next)try{r.next(t)}catch(e){j(e)}},n.prototype.error=function(t){var r=this.partialObserver;if(r.error)try{r.error(t)}catch(e){j(e)}else j(t)},n.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(r){j(r)}},n}(),F=function(n){_(t,n);function t(r,e,o){var i=n.call(this)||this,u;if(p(r)||!r)u={next:r!=null?r:void 0,error:e!=null?e:void 0,complete:o!=null?o:void 0};else{var a;i&&Z.useDeprecatedNextContext?(a=Object.create(r),a.unsubscribe=function(){return i.unsubscribe()},u={next:r.next&&z(r.next,a),error:r.error&&z(r.error,a),complete:r.complete&&z(r.complete,a)}):u=r}return i.destination=new _n(u),i}return t}(Q);function j(n){cn(n)}function kn(n){throw n}function D(n,t){var r=Z.onStoppedNotification;r&&M.setTimeout(function(){return r(n,t)})}var Ln={closed:!0,next:X,error:kn,complete:X},V=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function jn(n){return n}function Rn(n){return n.length===0?jn:n.length===1?n[0]:function(r){return n.reduce(function(e,o){return o(e)},r)}}var w=function(){function n(t){t&&(this._subscribe=t)}return n.prototype.lift=function(t){var r=new n;return r.source=this,r.operator=t,r},n.prototype.subscribe=function(t,r,e){var o=this,i=Mn(t)?t:new F(t,r,e);return R(function(){var u=o,a=u.operator,f=u.source;i.add(a?a.call(i,f):f?o._subscribe(i):o._trySubscribe(i))}),i},n.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(r){t.error(r)}},n.prototype.forEach=function(t,r){var e=this;return r=B(r),new r(function(o,i){var u=new F({next:function(a){try{t(a)}catch(f){i(f),u.unsubscribe()}},error:i,complete:o});e.subscribe(u)})},n.prototype._subscribe=function(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)},n.prototype[V]=function(){return this},n.prototype.pipe=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Rn(t)(this)},n.prototype.toPromise=function(t){var r=this;return t=B(t),new t(function(e,o){var i;r.subscribe(function(u){return i=u},function(u){return o(u)},function(){return e(i)})})},n.create=function(t){return new n(t)},n}();function B(n){var t;return(t=n!=null?n:Z.Promise)!==null&&t!==void 0?t:Promise}function Un(n){return n&&p(n.next)&&p(n.error)&&p(n.complete)}function Mn(n){return n&&n instanceof Q||Un(n)&&un(n)}function Fn(n){return p(n==null?void 0:n.lift)}function S(n){return function(t){if(Fn(t))return t.lift(function(r){try{return n(r,this)}catch(e){this.error(e)}});throw new TypeError("Unable to lift unknown Observable type")}}function g(n,t,r,e,o){return new Yn(n,t,r,e,o)}var Yn=function(n){_(t,n);function t(r,e,o,i,u,a){var f=n.call(this,r)||this;return f.onFinalize=u,f.shouldUnsubscribe=a,f._next=e?function(c){try{e(c)}catch(l){r.error(l)}}:n.prototype._next,f._error=i?function(c){try{i(c)}catch(l){r.error(l)}finally{this.unsubscribe()}}:n.prototype._error,f._complete=o?function(){try{o()}catch(c){r.error(c)}finally{this.unsubscribe()}}:n.prototype._complete,f}return t.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var e=this.closed;n.prototype.unsubscribe.call(this),!e&&((r=this.onFinalize)===null||r===void 0||r.call(this))}},t}(Q),Gn=en(function(n){return function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),an=function(n){_(t,n);function t(){var r=n.call(this)||this;return r.closed=!1,r.observers=[],r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return t.prototype.lift=function(r){var e=new N(this,this);return e.operator=r,e},t.prototype._throwIfClosed=function(){if(this.closed)throw new Gn},t.prototype.next=function(r){var e=this;R(function(){var o,i;if(e._throwIfClosed(),!e.isStopped){var u=e.observers.slice();try{for(var a=x(u),f=a.next();!f.done;f=a.next()){var c=f.value;c.next(r)}}catch(l){o={error:l}}finally{try{f&&!f.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}}})},t.prototype.error=function(r){var e=this;R(function(){if(e._throwIfClosed(),!e.isStopped){e.hasError=e.isStopped=!0,e.thrownError=r;for(var o=e.observers;o.length;)o.shift().error(r)}})},t.prototype.complete=function(){var r=this;R(function(){if(r._throwIfClosed(),!r.isStopped){r.isStopped=!0;for(var e=r.observers;e.length;)e.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(r){return this._throwIfClosed(),n.prototype._trySubscribe.call(this,r)},t.prototype._subscribe=function(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)},t.prototype._innerSubscribe=function(r){var e=this,o=e.hasError,i=e.isStopped,u=e.observers;return o||i?on:(u.push(r),new Y(function(){return U(u,r)}))},t.prototype._checkFinalizedStatuses=function(r){var e=this,o=e.hasError,i=e.thrownError,u=e.isStopped;o?r.error(i):u&&r.complete()},t.prototype.asObservable=function(){var r=new w;return r.source=this,r},t.create=function(r,e){return new N(r,e)},t}(w),N=function(n){_(t,n);function t(r,e){var o=n.call(this)||this;return o.destination=r,o.source=e,o}return t.prototype.next=function(r){var e,o;(o=(e=this.destination)===null||e===void 0?void 0:e.next)===null||o===void 0||o.call(e,r)},t.prototype.error=function(r){var e,o;(o=(e=this.destination)===null||e===void 0?void 0:e.error)===null||o===void 0||o.call(e,r)},t.prototype.complete=function(){var r,e;(e=(r=this.destination)===null||r===void 0?void 0:r.complete)===null||e===void 0||e.call(r)},t.prototype._subscribe=function(r){var e,o;return(o=(e=this.source)===null||e===void 0?void 0:e.subscribe(r))!==null&&o!==void 0?o:on},t}(an),zn=new w(function(n){return n.complete()}),W=function(n){return n&&typeof n.length=="number"&&typeof n!="function"};function fn(n){return p(n==null?void 0:n.then)}function ln(n){return p(n[V])}function sn(n){return Symbol.asyncIterator&&p(n==null?void 0:n[Symbol.asyncIterator])}function hn(n){return new TypeError("You provided "+(n!==null&&typeof n=="object"?"an invalid object":"'"+n+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Dn(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var vn=Dn();function dn(n){return p(n==null?void 0:n[vn])}function pn(n){return In(this,arguments,function(){var r,e,o,i;return tn(this,function(u){switch(u.label){case 0:r=n.getReader(),u.label=1;case 1:u.trys.push([1,,9,10]),u.label=2;case 2:return[4,O(r.read())];case 3:return e=u.sent(),o=e.value,i=e.done,i?[4,O(void 0)]:[3,5];case 4:return[2,u.sent()];case 5:return[4,O(o)];case 6:return[4,u.sent()];case 7:return u.sent(),[3,2];case 8:return[3,10];case 9:return r.releaseLock(),[7];case 10:return[2]}})})}function yn(n){return p(n==null?void 0:n.getReader)}function T(n){if(n instanceof w)return n;if(n!=null){if(ln(n))return Hn(n);if(W(n))return qn(n);if(fn(n))return Zn(n);if(sn(n))return mn(n);if(dn(n))return Jn(n);if(yn(n))return Qn(n)}throw hn(n)}function Hn(n){return new w(function(t){var r=n[V]();if(p(r.subscribe))return r.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function qn(n){return new w(function(t){for(var r=0;r<n.length&&!t.closed;r++)t.next(n[r]);t.complete()})}function Zn(n){return new w(function(t){n.then(function(r){t.closed||(t.next(r),t.complete())},function(r){return t.error(r)}).then(null,cn)})}function Jn(n){return new w(function(t){var r,e;try{for(var o=x(n),i=o.next();!i.done;i=o.next()){var u=i.value;if(t.next(u),t.closed)return}}catch(a){r={error:a}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(r)throw r.error}}t.complete()})}function mn(n){return new w(function(t){Vn(n,t).catch(function(r){return t.error(r)})})}function Qn(n){return mn(pn(n))}function Vn(n,t){var r,e,o,i;return En(this,void 0,void 0,function(){var u,a;return tn(this,function(f){switch(f.label){case 0:f.trys.push([0,5,6,11]),r=On(n),f.label=1;case 1:return[4,r.next()];case 2:if(e=f.sent(),!!e.done)return[3,4];if(u=e.value,t.next(u),t.closed)return[2];f.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=f.sent(),o={error:a},[3,11];case 6:return f.trys.push([6,,9,10]),e&&!e.done&&(i=r.return)?[4,i.call(r)]:[3,8];case 7:f.sent(),f.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function E(n,t,r,e,o){e===void 0&&(e=0),o===void 0&&(o=!1);var i=t.schedule(function(){r(),o?n.add(this.schedule(null,e)):this.unsubscribe()},e);if(n.add(i),!o)return i}function bn(n,t){return t===void 0&&(t=0),S(function(r,e){r.subscribe(g(e,function(o){return E(e,n,function(){return e.next(o)},t)},function(){return E(e,n,function(){return e.complete()},t)},function(o){return E(e,n,function(){return e.error(o)},t)}))})}function wn(n,t){return t===void 0&&(t=0),S(function(r,e){e.add(n.schedule(function(){return r.subscribe(e)},t))})}function Wn(n,t){return T(n).pipe(wn(t),bn(t))}function $n(n,t){return T(n).pipe(wn(t),bn(t))}function Kn(n,t){return new w(function(r){var e=0;return t.schedule(function(){e===n.length?r.complete():(r.next(n[e++]),r.closed||this.schedule())})})}function Xn(n,t){return new w(function(r){var e;return E(r,t,function(){e=n[vn](),E(r,t,function(){var o,i,u;try{o=e.next(),i=o.value,u=o.done}catch(a){r.error(a);return}u?r.complete():r.next(i)},0,!0)}),function(){return p(e==null?void 0:e.return)&&e.return()}})}function Sn(n,t){if(!n)throw new Error("Iterable cannot be null");return new w(function(r){E(r,t,function(){var e=n[Symbol.asyncIterator]();E(r,t,function(){e.next().then(function(o){o.done?r.complete():r.next(o.value)})},0,!0)})})}function Bn(n,t){return Sn(pn(n),t)}function Nn(n,t){if(n!=null){if(ln(n))return Wn(n,t);if(W(n))return Kn(n,t);if(fn(n))return $n(n,t);if(sn(n))return Sn(n,t);if(dn(n))return Xn(n,t);if(yn(n))return Bn(n,t)}throw hn(n)}function nr(n,t){return t?Nn(n,t):T(n)}function xn(n,t){return S(function(r,e){var o=0;r.subscribe(g(e,function(i){e.next(n.call(t,i,o++))}))})}var rr=Array.isArray;function tr(n,t){return rr(t)?n.apply(void 0,C([],A(t))):n(t)}function er(n){return xn(function(t){return tr(n,t)})}function or(n,t,r,e,o,i,u,a){var f=[],c=0,l=0,h=!1,s=function(){h&&!f.length&&!c&&t.complete()},d=function(v){return c<e?y(v):f.push(v)},y=function(v){i&&t.next(v),c++;var m=!1;T(r(v,l++)).subscribe(g(t,function(b){o==null||o(b),i?d(b):t.next(b)},function(){m=!0},void 0,function(){if(m)try{c--;for(var b=function(){var I=f.shift();u?E(t,u,function(){return y(I)}):y(I)};f.length&&c<e;)b();s()}catch(I){t.error(I)}}))};return n.subscribe(g(t,d,function(){h=!0,s()})),function(){a==null||a()}}function gn(n,t,r){return r===void 0&&(r=1/0),p(t)?gn(function(e,o){return xn(function(i,u){return t(e,i,o,u)})(T(n(e,o)))},r):(typeof t=="number"&&(r=t),S(function(e,o){return or(e,o,n,r)}))}var ir=["addListener","removeListener"],ur=["addEventListener","removeEventListener"],cr=["on","off"];function nn(n,t,r,e){if(p(r)&&(e=r,r=void 0),e)return nn(n,t,r).pipe(er(e));var o=A(lr(n)?ur.map(function(a){return function(f){return n[a](t,f,r)}}):ar(n)?ir.map(rn(n,t)):fr(n)?cr.map(rn(n,t)):[],2),i=o[0],u=o[1];if(!i&&W(n))return gn(function(a){return nn(a,t,r)})(T(n));if(!i)throw new TypeError("Invalid event target");return new w(function(a){var f=function(){for(var c=[],l=0;l<arguments.length;l++)c[l]=arguments[l];return a.next(1<c.length?c:c[0])};return i(f),function(){return u(f)}})}function rn(n,t){return function(r){return function(e){return n[r](t,e)}}}function ar(n){return p(n.addListener)&&p(n.removeListener)}function fr(n){return p(n.on)&&p(n.off)}function lr(n){return p(n.addEventListener)&&p(n.removeEventListener)}function vr(n,t){return S(function(r,e){var o=0;r.subscribe(g(e,function(i){return n.call(t,i,o++)&&e.next(i)}))})}function dr(n,t){return t===void 0&&(t=null),t=t!=null?t:n,S(function(r,e){var o=[],i=0;r.subscribe(g(e,function(u){var a,f,c,l,h=null;i++%t===0&&o.push([]);try{for(var s=x(o),d=s.next();!d.done;d=s.next()){var y=d.value;y.push(u),n<=y.length&&(h=h!=null?h:[],h.push(y))}}catch(b){a={error:b}}finally{try{d&&!d.done&&(f=s.return)&&f.call(s)}finally{if(a)throw a.error}}if(h)try{for(var v=x(h),m=v.next();!m.done;m=v.next()){var y=m.value;U(o,y),e.next(y)}}catch(b){c={error:b}}finally{try{m&&!m.done&&(l=v.return)&&l.call(v)}finally{if(c)throw c.error}}},function(){var u,a;try{for(var f=x(o),c=f.next();!c.done;c=f.next()){var l=c.value;e.next(l)}}catch(h){u={error:h}}finally{try{c&&!c.done&&(a=f.return)&&a.call(f)}finally{if(u)throw u.error}}e.complete()},void 0,function(){o=null}))})}function sr(n,t,r,e,o){return function(i,u){var a=r,f=t,c=0;i.subscribe(g(u,function(l){var h=c++;f=a?n(f,l,h):(a=!0,l),e&&u.next(f)},o&&function(){a&&u.next(f),u.complete()}))}}function hr(n){return n<=0?function(){return zn}:S(function(t,r){var e=0;t.subscribe(g(r,function(o){++e<=n&&(r.next(o),n<=e&&r.complete())}))})}function pr(n,t){return S(sr(n,t,arguments.length>=2,!0))}function yr(n){n===void 0&&(n={});var t=n.connector,r=t===void 0?function(){return new an}:t,e=n.resetOnError,o=e===void 0?!0:e,i=n.resetOnComplete,u=i===void 0?!0:i,a=n.resetOnRefCountZero,f=a===void 0?!0:a;return function(c){var l=null,h=null,s=null,d=0,y=!1,v=!1,m=function(){h==null||h.unsubscribe(),h=null},b=function(){m(),l=s=null,y=v=!1},I=function(){var P=l;b(),P==null||P.unsubscribe()};return S(function(P,$){d++,!v&&!y&&m();var k=s=s!=null?s:r();$.add(function(){d--,d===0&&!v&&!y&&(h=H(I,f))}),k.subscribe($),l||(l=new F({next:function(L){return k.next(L)},error:function(L){v=!0,m(),h=H(b,o,L),k.error(L)},complete:function(){y=!0,m(),h=H(b,u),k.complete()}}),nr(P).subscribe(l))})(c)}}function H(n,t){for(var r=[],e=2;e<arguments.length;e++)r[e-2]=arguments[e];return t===!0?(n(),null):t===!1?null:t.apply(void 0,C([],A(r))).pipe(hr(1)).subscribe(function(){return n()})}function mr(n,t){return t===void 0&&(t=!1),S(function(r,e){var o=0;r.subscribe(g(e,function(i){var u=n(i,o++);(u||t)&&e.next(i),!u&&e.complete()}))})}export{vr as a,dr as b,pr as c,nn as f,xn as m,yr as s,mr as t};
